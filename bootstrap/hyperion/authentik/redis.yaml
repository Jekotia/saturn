services:
  authentik.redis:
    image: docker.io/library/redis:8.2.0-alpine
    container_name: authentik.redis
    command: --save 60 1 --loglevel warning
    restart: always
    healthcheck:
      test: ["CMD-SHELL", "redis-cli ping | grep PONG"]
      start_period: 20s
      interval: 30s
      retries: 5
      timeout: 3s
    volumes:
      - /srv/application_data/bootstrap/authentik/redis/data:/data
    networks:
      - authentik
    labels:
      komodo.skip: true # Prevent Komodo from stopping with StopAllContainers
      # What's Up Docker
      wud.watch: true
      wud.watch.digest: false
      wud.display.icon: sh:redis
      wud.tag.include: ^\d+\.\d+\.\d+-alpine$$
