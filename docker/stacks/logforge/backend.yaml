services:
  logforge.backend:
    image: madanb13/logforge-backend:latest@sha256:09b1f96ccc885c98463e00a4873f3fe8fe91591798bd75478aa89a4c6ce13d5d
    container_name: logforge.backend
    environment:
      PORT: "${BACKEND_SERVICE_PORT:-8000}"
      NOTIFIER_SERVICE_CONTAINER_NAME: "${NOTIFIER_SERVICE_CONTAINER_NAME:-logforge.notifier}"
      NOTIFIER_PLAIN_PORT: "${NOTIFIER_PLAIN_PORT:-8083}"
    networks:
      - logforge
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /srv/application_data/logforge/backend/data:/app/core/data
    restart: always
    ports:
      - "${EXPOSED_BACKEND_PORT:-8000}:${BACKEND_SERVICE_PORT:-8000}"
    labels:
      diun.enable: "true"